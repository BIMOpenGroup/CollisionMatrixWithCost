## Цель
Обновить страницу так, чтобы стоимость устранения коллизии по каждой выбранной ячейке отображалась исходя из корректировок элемента строки (асимметричная оценка: KR×OV — корректируется KR; OV×KR — корректируется OV). Все расчёты выполняются на бэкенде; фронтенд только запрашивает и отображает агрегированные значения.

## Изменения в UI
1. Добавить явную подсказку в панели ячейки: «Затраты считаются по элементу строки».
2. В блоке «Оценка коллизий» дополнительно вывести итоги, используя данные из API:
   - «Затраты (корректируется строка)» — значение `row_total` из ответа сервера.
   - «Затраты (корректируется колонка)» — значение `col_total` из ответа сервера.
3. Отобразить валюту и форматировать суммы c двумя знаками.

## Расчёт сумм на бэкенде
- Бэкенд выполняет агрегирование и возвращает готовые значения:
  - `row_total`, `row_min`, `row_max` — по позициям, корректируемым элементом строки.
  - `col_total`, `col_min`, `col_max` — по позициям, корректируемым элементом колонки (для сравнения).
  - `currency` — код валюты для форматирования на клиенте.
- Фронтенд запрашивает значения и отображает их под «Диапазон» (min–max) как ориентиры реальных затрат; основная ориентация — строка.
- Элементы `calcItems` (если возвращаются для детализации) используются только для показа состава; суммирование на клиенте не выполняется.

## Поведение матрицы
- Основной «Σ» в ячейке матрицы оставляем как есть (питается от `/api/cells/summary`).
- После клика по ячейке, в панели пользователю становится видна асимметрия за счёт отдельного итога по строке (`row_total`), возвращаемого бэкендом.

## Расширение редактирования сценариев (минимально)
- Без изменения формата сценариев: не вводим признак «сторона» для позиций (чтобы не усложнять бэкенд пока).
- Сценарии по‑прежнему сохраняются, но итоговая стоимость для принятия решений акцентирована по строке через агрегаты (`row_total`) из ответа бэкенда.

## Возможное бэкенд‑улучшение (в следующем этапе, по желанию)
- Добавить метку «side» у item на уровне детализации, если потребуется перенос логики выбора стороны на уровне отдельных позиций.
- Кэшировать агрегаты на уровне матрицы для быстрого показа диапазонов без клика (предварительный расчёт `row_min`/`row_max`/`col_min`/`col_max`).

## Внесение изменений в код
- Фронтенд: `frontend/src/tabs/CostMatrixTab.tsx`.
  - В блоке рендера панели ячейки (строки 178–339): использовать значения `row_total`/`col_total`/`row_min`/`row_max`/`col_min`/`col_max` из ответа API; не выполнять суммирование на клиенте.
  - Под заголовком «Оценка коллизий» вывести два дополнительных поля с форматированием.
  - Добавить краткую пометку о выбранной ориентации затрат.
- Бэкенд: расширить API, чтобы вернуть агрегированные значения.
  - `/api/cells/summary` — добавить поля для диапазонов по строке/колонке при необходимости отображения их на матрице.
  - `/api/cells/{r}/{c}/collision-cost` — вернуть `row_total`/`row_min`/`row_max`, `col_total`/`col_min`/`col_max`, `currency` и (опционально) детализацию позиций.

## Проверка
- Открыть ячейки для пары направлений (например, KR×OV и OV×KR) и убедиться, что:
  - Итоги по строке различаются и отражают разные наборы позиций.
  - Форматирование сумм и валют корректно.
  - Никаких регрессий в существующих действиях (генерация предложений, авто‑одобрение, сохранение сценариев).
